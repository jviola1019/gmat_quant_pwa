/*
  Enhanced styling for the GMAT Study PWA.
  This file is based on the original Neon Console guide but has been
  updated with a lighter, more corporate colour palette. The goal is
  to improve readability and give the app a polished look without
  relying on any external dependencies. Feel free to tweak the
  variables below to further customise the appearance.
*/

:root{
  /* Primary backgrounds */
  --bg0:#f4f6fb;
  --bg1:#e9ecf8;
  /* Text colours */
  --text:#1a1a2e;
  --muted:#596e9f;
  /* Border/line colours */
  --line:rgba(0,0,0,.12);
  --line2:rgba(0,0,0,.05);
  /* Typography */
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  /* Global radius and shadows */
  --r:16px;
  --shadow: 0 4px 12px rgba(0,0,0,.06);

  /* Accent colour used for progress bars, badges and other highlights */
  --accent:#4e73eb;
  --accent-light: rgba(78,115,235,.35);
  --accent-bg: rgba(78,115,235,.15);
}

/* Dark theme variables and overrides. These values are inspired by modern UI
   design guidance that recommends using CSS variables to manage light and dark
   modes【517566158179139†L160-L172】. When the data-theme="dark" attribute is
   present on the root element (see app.js), these variables override the
   default palette to create a high‑contrast, futuristic look. */
[data-theme="dark"]{
  /* Dark background gradient */
  --bg0: #0b0e24;
  --bg1: #111a36;
  /* Light text on dark backgrounds */
  --text: #cdd4e4;
  --muted: #7a89b2;
  /* Light borders and lines */
  --line: rgba(255,255,255,.18);
  --line2: rgba(255,255,255,.1);
  /* Deeper shadows for elevated panels */
  --shadow: 0 6px 18px rgba(0,0,0,.5);
}

/* Component overrides for dark mode. Using attribute selectors keeps
   light and dark styles logically separated. */
[data-theme="dark"] body{
  background: linear-gradient(180deg, var(--bg0), var(--bg1));
  color: var(--text);
}
[data-theme="dark"] .nav{
  background: rgba(255,255,255,.08);
  border-color: var(--line);
}
[data-theme="dark"] .navItem{
  color: var(--muted);
}
[data-theme="dark"] .navItem:hover{
  background: rgba(255,255,255,.05);
}
[data-theme="dark"] .navItem[aria-current="page"]{
  border-color: rgba(78,115,235,.45);
  background: rgba(78,115,235,.25);
  color: var(--text);
}
[data-theme="dark"] .panel{
  background: rgba(255,255,255,.05);
  border-color: var(--line);
  box-shadow: var(--shadow);
}
[data-theme="dark"] .panel.compact{
  background: rgba(255,255,255,.03);
}
[data-theme="dark"] .toolbar,
[data-theme="dark"] .contentHead,
[data-theme="dark"] .sideTitle,
[data-theme="dark"] .modalTop{
  background: rgba(255,255,255,.04);
  border-color: var(--line2);
}
[data-theme="dark"] .search{
  background: rgba(255,255,255,.07);
  border-color: var(--line);
}
[data-theme="dark"] .search input::placeholder{
  color: var(--muted);
}
[data-theme="dark"] .mini,
[data-theme="dark"] .badge,
[data-theme="dark"] .stat,
[data-theme="dark"] .kbtn,
[data-theme="dark"] .chip,
[data-theme="dark"] .cmd,
[data-theme="dark"] input,
[data-theme="dark"] textarea,
[data-theme="dark"] select{
  background: rgba(255,255,255,.07);
  color: var(--text);
  border-color: var(--line);
}
[data-theme="dark"] .mini.file::before{
  color: var(--text);
}
[data-theme="dark"] .itemBody,
[data-theme="dark"] .cmdInput{
  background: rgba(255,255,255,.05);
}
[data-theme="dark"] .itemTop{
  background: rgba(255,255,255,.05);
}
[data-theme="dark"] .modalCard{
  background: rgba(10,15,40,.94);
  border-color: var(--line);
  color: var(--text);
}
[data-theme="dark"] .foot,
[data-theme="dark"] .muted{
  color: var(--muted);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--sans);
  color:var(--text);
  /* Use subtle gradients for depth */
  background:
    linear-gradient(180deg, var(--bg0), var(--bg1));
}
a, button, [role="button"]{-webkit-tap-highlight-color: transparent; touch-action: manipulation;}
.app{max-width:1180px; margin:0 auto; padding:max(14px, env(safe-area-inset-top)) 14px max(18px, env(safe-area-inset-bottom));}
.top{display:flex; flex-wrap:wrap; gap:12px; align-items:flex-start; justify-content:space-between; margin-bottom:10px;}
.brand{min-width:260px; flex:1 1 420px;}
.kicker{font-family:var(--mono); font-size:11.5px; color:var(--muted); letter-spacing:.6px;}
.title{margin:6px 0 0; font-size:22px; font-weight:800; color:var(--text);}
.subtitle{margin:8px 0 0; color:var(--muted); font-size:13px; line-height:1.4;}
.pill{display:inline-block; margin-left:6px; font-family:var(--mono); font-size:11px; padding:3px 8px; border-radius:999px; border:1px solid var(--line); background:rgba(0,0,0,.03); color:var(--text);}
.topActions{display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end;}
.btn{border:1px solid var(--line); background:rgba(0,0,0,.03); color:var(--text); padding:10px 12px; border-radius:14px; font-size:12.5px; cursor:pointer; user-select:none;}
.btn:active{transform: translateY(1px)}
.btn.ghost{background: rgba(255,255,255,.25)}
.nav{display:flex; gap:8px; border:1px solid var(--line); background:rgba(255,255,255,.4); padding:8px; border-radius:var(--r); overflow:auto; position:sticky; top:10px; z-index:3;}
.navItem{flex:0 0 auto; display:flex; align-items:center; gap:8px; border:1px solid transparent; background:transparent; color:var(--muted); padding:10px 14px; border-radius:14px; font-size:13px; cursor:pointer; transition:background .15s, border-color .15s;}
.navItem .ico{font-family:var(--mono); opacity:.8}
.navItem:hover{background:rgba(0,0,0,.05);}
.navItem[aria-current="page"]{
  border-color: var(--accent-light);
  background: var(--accent-bg);
  color: var(--text);
}
.main{margin-top:10px; display:grid; grid-template-columns: 1.35fr .65fr; gap:10px;}
@media (max-width: 900px){ .main{grid-template-columns:1fr;} }
.panel{
  border:1px solid var(--line);
  background:rgba(255,255,255,.5);
  border-radius:var(--r);
  box-shadow:var(--shadow);
  overflow:hidden;
  /* Apply a subtle glass blur for a futuristic vibe */
  backdrop-filter: blur(8px);
}
.panel.compact{
  box-shadow:none;
  background:rgba(255,255,255,.4);
  backdrop-filter: blur(6px);
}
.toolbar{padding:10px; display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; border-bottom:1px solid var(--line2); background:rgba(0,0,0,.02);}
.search{flex:1 1 280px; min-width:220px; display:flex; align-items:center; gap:8px; padding:10px; border-radius:14px; border:1px solid var(--line); background:rgba(255,255,255,.6);}
.search input{width:100%; border:none; outline:none; background:transparent; color:var(--text); font-size:13px;}
.search input::placeholder{color:var(--muted)}
.mag{opacity:.7}
.mini{border:1px solid var(--line); background:rgba(255,255,255,.6); color:var(--text); padding:8px 10px; border-radius:14px; font-size:12px; cursor:pointer; user-select:none;}
.mini:active{transform: translateY(1px)}
.mini.file{position:relative; overflow:hidden}
.mini.file input{position:absolute; inset:0; opacity:0; cursor:pointer}
.contentHead{padding:10px; display:flex; align-items:flex-end; justify-content:space-between; gap:10px; border-bottom:1px solid var(--line2); background:rgba(0,0,0,.02);}
.h2{font-family:var(--mono); font-size:12px; letter-spacing:.3px; color:var(--muted)}
.h3{margin-top:4px; font-size:13px; color:var(--muted);}
.stats{display:flex; gap:10px;}
.stat{border:1px solid var(--line); background:rgba(255,255,255,.6); border-radius:14px; padding:8px 10px; min-width:86px; text-align:center;}
.stat .k{font-family:var(--mono); font-size:13px; color:var(--text);}
.stat .l{font-size:11px; color:var(--muted); margin-top:2px;}
.list{padding:10px;}
.item{border:1px solid var(--line); background:rgba(255,255,255,.6); border-radius:14px; overflow:hidden; margin-bottom:10px; color:var(--text);}
.itemTop{display:flex; gap:10px; align-items:center; justify-content:space-between; padding:12px; background:rgba(255,255,255,.45);}
.left{min-width:0}
.t{margin:0; font-size:13px; font-weight:700; color:var(--text);}
.s{margin:4px 0 0; font-size:12.5px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:70ch;}
.badge{font-family:var(--mono); font-size:11px; padding:5px 8px; border-radius:999px; border:1px solid var(--line); background:rgba(255,255,255,.6); color:var(--text);}
.itemBody{display:none; padding:0 12px 12px; font-size:13px; line-height:1.55; background:rgba(255,255,255,.5);}
.item[aria-expanded="true"] .itemBody{display:block}
.actionsRow{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap; align-items:center;}
.kbtn{font-family:var(--mono); font-size:12px; padding:7px 10px; border-radius:14px; border:1px solid var(--line); background:rgba(255,255,255,.6); color:var(--text); cursor:pointer;}
.kbtn.good{border-color:rgba(40,167,69,.35); background:rgba(40,167,69,.15)}
.kbtn.bad{border-color:rgba(220,53,69,.35); background:rgba(220,53,69,.15)}
.side{display:flex; flex-direction:column; gap:10px;}
.sideTitle{padding:10px; border-bottom:1px solid var(--line2); font-family:var(--mono); font-size:12px; background:rgba(0,0,0,.02); color:var(--muted);}
.sideBody{padding:10px;}
.chip{display:inline-block; margin:0 8px 8px 0; padding:8px 10px; border-radius:999px; border:1px solid var(--line); background:rgba(255,255,255,.6); font-size:12px; color:var(--text);}
.timer .clock{font-family:var(--mono); font-size:28px; letter-spacing:.5px; margin-bottom:10px; color:var(--text);}
.timerBtns{display:flex; gap:8px; flex-wrap:wrap;}
.muted{color:var(--muted); font-size:12.5px; line-height:1.45;}
code{font-family:var(--mono); font-size:12px; color:var(--text);}
.foot{margin-top:10px; color:var(--muted); font-size:12.5px; text-align:center;}
.sep{opacity:.5; margin:0 6px;}
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.4); padding:14px; z-index:999;}
.modal[aria-hidden="false"]{display:flex}
.modalCard{width:min(720px, 100%); border:1px solid var(--line); background:rgba(255,255,255,.95); border-radius:var(--r); overflow:hidden; box-shadow:var(--shadow); color:var(--text);}
.modalTop{padding:10px; display:flex; align-items:center; justify-content:space-between; gap:10px; border-bottom:1px solid var(--line2); background:rgba(0,0,0,.02); color:var(--text);}
.modalTitle{font-family:var(--mono); font-size:12px; color:var(--text);}
.cmdInput{margin:10px; display:flex; gap:8px; align-items:center; padding:10px; border-radius:14px; border:1px solid var(--line); background:rgba(255,255,255,.6);}
.cmdInput input{width:100%; border:none; outline:none; background:transparent; color:var(--text); font-size:13px;}
.cmdList{padding:0 10px 10px; display:grid; gap:8px;}

/* Quiz progress bar */
.qProgress{height:6px; width:100%; background:var(--line2); border-radius:5px; overflow:hidden; margin:8px 0;}
.qProgressBar{height:100%; width:0%; background:var(--accent); transition:width .3s ease;}

/* Dark mode tweaks for progress bar */
[data-theme="dark"] .qProgress{background:rgba(255,255,255,.15);}
[data-theme="dark"] .qProgressBar{background:rgba(78,115,235,.75);}
.cmd{border:1px solid var(--line); background:rgba(255,255,255,.6); border-radius:14px; padding:10px; cursor:pointer; color:var(--text);}
.cmd .c1{font-family:var(--mono); font-size:12px; color:var(--text)}
.cmd .c2{margin-top:4px; font-size:12px; color:var(--muted)}
.form{padding:10px; display:grid; gap:10px;}
label{display:grid; gap:6px; font-size:12.5px; color:var(--text);}
input, textarea, select{font-family:var(--sans); font-size:13px; color:var(--text); border:1px solid var(--line); background:rgba(255,255,255,.6); padding:10px; border-radius:14px; outline:none;}
textarea{min-height:110px; resize:vertical;}
.row{display:grid; gap:10px; grid-template-columns:1fr 1fr;}
.row.end{grid-template-columns:1fr auto; align-items:center;}
@media (max-width: 560px){
  .row{grid-template-columns:1fr;}
  .navItem span{display:none}
  .navItem{padding:10px; gap:0}
  .navItem .ico{font-size:14px}
}